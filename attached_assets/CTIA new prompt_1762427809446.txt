Project Prompt: MERN CTI Aggregator (Backend Integration)
1. Project Overview & New Goal
The next phase is to build the backend and connect the two, making the application dynamic and interactive.
Your new goals are:
1. Build a Mock Backend: Create a Node.js/Express API server that returns hard-coded "dummy" data. This server will run in the /server directory.
2. Integrate the Frontend: Modify the existing React application (in /client) to remove the local mock data file and fetch all its data from your new backend API using axios.
3. Enhance Frontend Interactivity: Add dynamic behaviors (API-driven filtering, loading states, error handling) and subtle visual improvements to make the application feel more responsive.
Scope Exclusion: For this phase, you can skip the "Chat Assistant" page. No backend or frontend work is needed for the chat functionality right now.
2. Technology Stack & Constraints
* Backend (New Task):
   * Node.js: Server-side environment.
   * Express.js: To create the API server and routes.
   * cors: Middleware to allow cross-origin requests from your React app (which runs on a different port).
   * nodemon (optional): For auto-restarting the server during development.
* Frontend (Modification Task):
   * React.js: The existing React application.
   * Axios: To make all HTTP requests to the backend.
   * Recharts / Chart.js: The existing charting library.
* Project Structure:
   * You must follow the established MERN monorepo structure:
      * /client: Contains the entire React application.
      * /server: Contains the new Node.js/Express application.
3. Backend Task: Build the Mock API Server
Your task is to build the Node.js/Express server inside the /server folder.
IMPORTANT: You will not connect to a MongoDB database in this step. Instead, you will create a Mock API. Each API endpoint should return hard-coded JSON data (dummy data) that mimics the database structure.
3.1. Server Setup (/server/index.js or /server/server.js)
* Set up an Express server.
* Use the cors middleware to allow requests from your React app (e.g., http://localhost:3000).
* Define all the API routes listed below.
3.2. Mock API Endpoints (To Be Built)
Create these routes. Each route should just res.json(...) with a realistic-looking array or object of dummy data.
* /api/dashboard/stats:
   * Return an object with 4 KPIs: totalIocs, newFeeds, criticalCves, phishingDomains.
* /api/dashboard/recent-threats:
   * Return an array of the 5 most recent threat objects (IOC, Type, Severity, Time).
* /api/dashboard/threat-trends:
   * Return an array of data points for the 7-day line chart (e.g., [{name: 'Mon', threats: 45}, ...]).
* /api/threat-feeds:
   * This must be dynamic. The route should read query parameters (e.g., req.query.search, req.query.severity, req.query.page).
   * Return a filtered list of IOCs based on these parameters. You can write simple JavaScript .filter() logic on a large dummy array of IOCs.
   * Also return pagination info: totalItems, totalPages, currentPage.
* /api/cve-reports:
   * This must be dynamic. The route should read a search query (e.g., req.query.search).
   * Return a filtered list of CVEs based on the search query.
* /api/analytics/stats:
   * Return an object with the 4 analytics KPIs (Avg Daily Threats, Active Sources, etc.).
* /api/analytics/threats-per-day:
   * Return an array of data points for the "Threats Per Day" line chart.
* /api/analytics/threat-type-distribution:
   * Return an array of data for the doughnut chart (e.g., [{name: 'Phishing', value: 300}, ...]).
* /api/analytics/active-sources:
   * Return data for the "Most Active Sources" bar chart.
* /api/analytics/severity-trends:
   * Return data for the "Severity Trends" stacked bar chart.
* /api/settings/general:
   * Return an object with general settings (e.g., autoRefresh: '5 minutes', timezone: 'UTC').
* /api/settings/sources:
   * Return an array of "Threat Intelligence Sources" and their statuses.
4. Frontend Task: Integration & Enhancements
Modify your existing React application in the /client folder.
4.1. Remove Mock Data
* Delete the /client/src/mockData.js file (or equivalent).
* Remove all import statements that reference this mock data file from your components.
4.2. Integrate Axios
* In each component that needs data (e.g., Dashboard, ThreatFeeds), use a useEffect hook and axios to fetch data from your new backend API.
* Example: In Dashboard.js, fetch from /api/dashboard/stats, /api/dashboard/recent-threats, etc., and set the data into state.
4.3. Implement Dynamic Filtering
* Threat Feeds Page: The search, filter, and pagination controls must now trigger new API calls. When a user types in the search bar or selects a severity, your component should re-fetch from /api/threat-feeds with the new query parameters (e.g., axios.get('/api/threat-feeds?severity=Critical&page=2')).
* CVE Reports Page: The search bar must also trigger a new API call to /api/cve-reports?search=....
4.4. Add Dynamic Visuals & Interaction
* Loading States: For each component that fetches data, add a loading state. While loading is true (before the axios call completes), display a loading spinner or a simple "Loading..." message.
* Error Handling: Add an error state. If an axios call fails (in a .catch() block), set the error state and display a user-friendly message like "Failed to load data."
* UI Feedback (Visuals):
   * Add subtle transition and :hover effects in your CSS for table rows, buttons, and KPI cards to make the interface feel more responsive.
   * Ensure your charts animate smoothly when they load their new data from the API.
   * Disable search/filter buttons while a fetch is in progress to prevent duplicate requests.